version: '3.7'
services:
  platon:
    image: shinnng/platon-go:latest
    container_name: stress6
    volumes:
    - /data/platon-stress/node6:/data/platon
    network_mode: host
    environment:
      ENABLE_DEBUG: 'true'
      ENABLE_PPROF: 'true'
      ENABLE_WS: 'true'
      WSAPI: platon,debug,txpool,metrics,admin,net
      ENABLE_RPC: 'true'
      RPCAPI: platon,debug,txpool,metrics,admin,net
      VERBOSITY: 1
      INIT: 'true'
      NEW_ACCOUNT: 'true'
      ENABLE_DISCOVER: 'true'
      P2PPORT: '16790'
      WSPORT: '7790'
      RPCPORT: '6790'
      PPROFPORT: '8790'
      DISABLEDBGC: 'false'
      DBGCINTERVAL: 1000
      DBGCTIMEOUT: 5m
      DBGCMPT: 'true'
      MAXPEERS: 50
      HOST: 0.0.0.0
      CACHE_TRIEDB: 512
      BOOTNODES: enode://d79eb4db06374e0277ad925e1138587098e57910330dda4d9908771605260fc83def5956df8c489833aba74465abac0c027596b9d6f2510bd26865c0d3acf86d@192.168.120.124:16790
    logging:
      driver: fluentd
      options:
        fluentd-address: 192.168.120.121:9790
        tag: platon
        fluentd-async-connect: 'true'
    depends_on:
    - fluent
    - staking
  fluent:
    network_mode: host
    image: fluentd
    container_name: stress6-fluent
    volumes:
    - /data/platon-stress/node6/fluent.conf:/fluentd/etc/fluent.conf
    - /data/platon-stress/node6/log:/data/log/
  staking:
    network_mode: host
    image: shinnng/platon-go:loader
    container_name: stress6-staking
    environment:
      USE_CMD: batch_staking
      URL: ws://127.0.0.1:7790
      NODENAME: stress6
      BLSKEY: a6347112ef2a7246b892d0e897af6e19f3cac8cd063419a370ea44a664ab233b
      NODEKEY: 2fd1fcdea77e0bebb35ac3f6996d6b03802880aecc8ac0abf3cad3afb58549f3
      PRIVATE_KEY: 7e12e03a6bf89bd5b467ad9cb50f9467f32d74547ed23d4a888ff064caaa4162
      PROGRAM_VERSION: 3329
      CHAINID: 101
